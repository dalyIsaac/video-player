(this["webpackJsonpvideo-player"]=this["webpackJsonpvideo-player"]||[]).push([[4],{135:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return pe}));var n=a(86),c=a(21),r=a(0),i=a(1),o=a.n(i),l=a(133),s=a(84),u=a(134),b=a(110),d=a(115),j=a(118),O=a(138),f=a(121),v=a(122),g=a(123),h=a(124),x=function(){return{innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth}},p=function(){var e=Object(i.useState)(x()),t=Object(c.a)(e,2),a=t[0],n=t[1];function r(){n(x())}return Object(i.useEffect)((function(){return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}}),[]),a},y="statistics.position.y",m="statistics.position.x",k=function(e,t,a){var n=Math.floor(t/2),c=Math.floor(a/2),r=Math.floor(e.innerHeight/2);return{x:Math.floor(e.innerWidth/2)-c,y:r-n}},C=function(e){var t=localStorage.getItem(e);if(null===t)return null;var a=parseFloat(t);return isNaN(a)?null:a};var w=o.a.createContext(!1),T=o.a.createContext((function(){console.log("ToggleStatisticsVisible's context has not yet been set.")})),P=o.a.createContext(k({innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth},H,L)),S=o.a.createContext((function(e,t){console.log("UpdateStatisticsPosition's context has not yet been set.")})),R=a(83);function M(e){return new Date(1e3*e).toISOString().substr(11,8)}function D(e){var t=new Date(e);return Object(R.a)(t,"HH:mm:ss")}var I=a(119),N=a(66),K=a.n(N),V=Object(b.a)({closeButton:{float:"right"},root:{left:0,position:"absolute",top:0,width:400}});function A(e){var t=e.time,a=e.duration,n=e.playbackRate,o=e.now,l=e.remainingTime,s=e.remainingAtRate,u=e.watchStartTime,b=V(),x=Object(i.useRef)(null),y=Object(i.useContext)(w),m=Object(i.useContext)(T),k=Object(i.useContext)(P),C=Object(i.useContext)(S),R=p(),N=Object(i.useState)(-1),A=Object(c.a)(N,2),H=A[0],L=A[1];Object(i.useEffect)((function(){L(y?100:-1)}),[y,k,H]),Object(i.useEffect)((function(){C()}),[C,R]);var W=Object(i.useMemo)((function(){var e=0;return 0!==u&&(e=(o-u)/1e3),M(e)}),[o,u]),E=Object(i.useCallback)((function(){if(x.current){var e=x.current.getBoundingClientRect(),t=e.top,a=e.left;C(a,t)}}),[C]);return Object(r.jsx)(K.a,{nodeRef:x,bounds:"body",onStop:E,position:k,children:Object(r.jsx)("span",{ref:x,className:b.root,style:{zIndex:H},children:Object(r.jsx)(d.a,{style:{opacity:.8},children:Object(r.jsxs)(j.a,{children:[Object(r.jsx)(O.a,{"aria-label":"Close statistics panel",className:b.closeButton,onClick:m,children:Object(r.jsx)(I.a,{})}),Object(r.jsx)(f.a,{size:"small",children:Object(r.jsxs)(v.a,{children:[Object(r.jsxs)(g.a,{children:[Object(r.jsx)(h.a,{children:"Current time"}),Object(r.jsx)(h.a,{children:t})]}),Object(r.jsxs)(g.a,{children:[Object(r.jsx)(h.a,{children:"Watching for"}),Object(r.jsx)(h.a,{children:W})]}),Object(r.jsxs)(g.a,{children:[Object(r.jsx)(h.a,{children:"Duration"}),Object(r.jsx)(h.a,{children:a})]}),Object(r.jsxs)(g.a,{children:[Object(r.jsx)(h.a,{children:"Playback rate"}),Object(r.jsx)(h.a,{children:n})]}),Object(r.jsxs)(g.a,{children:[Object(r.jsx)(h.a,{children:"Remaining time"}),Object(r.jsx)(h.a,{children:l})]}),Object(r.jsxs)(g.a,{children:[Object(r.jsxs)(h.a,{children:["Remaining at \xd7",n]}),Object(r.jsx)(h.a,{children:s})]}),Object(r.jsxs)(g.a,{children:[Object(r.jsx)(h.a,{children:"Watch start time"}),Object(r.jsx)(h.a,{children:0===u?"N/A":D(u)})]})]})})]})})})})}var H=319,L=400,W=a(27),E=a(125);function U(e){var t=e.children,a=Object(W.a)();return Object(r.jsx)(E.a,{style:{color:a.palette.text.primary,padding:8},children:t})}var B=a(126),F=a(127);function z(e){var t=e.isMuted,a=e.toggleMuted,n=Object(i.useMemo)((function(){return t?Object(r.jsx)(B.a,{}):Object(r.jsx)(F.a,{})}),[t]);return Object(r.jsx)(O.a,{"aria-label":"Toggle muted",onClick:a,children:n})}var Y=a(128),J=a(129);function X(e){var t=e.isPaused,a=e.togglePaused,n=Object(i.useMemo)((function(){return t?Object(r.jsx)(Y.a,{}):Object(r.jsx)(J.a,{})}),[t]);return Object(r.jsx)(O.a,{"aria-label":"Toggle paused",onClick:a,children:n})}var _=a(136),q=10;var G=Object(b.a)({root:{padding:16}});function Q(e){var t=e.value,a=e.updateValue,n=G(),c=Object(i.useCallback)((function(e){a(e.currentTarget.value)}),[a]),o=Object(i.useCallback)((function(){var e=parseFloat(t);isNaN(e)&&a("1.0")}),[a,t]);return Object(r.jsx)(_.a,{className:n.root,"aria-label":"Video playback rate",type:"number",value:t,onChange:c,onBlur:o,inputProps:{"aria-label":"Video playback rate",step:1}})}var Z=a(141),$=a(140);function ee(e){var t=e.children,a=e.open,n=M(e.value);return Object(r.jsx)($.a,{open:a,enterTouchDelay:0,placement:"top",title:n,children:t})}function te(e){var t=e.className,a=e.currentTime,n=e.duration,c=e.updateCurrentTime,o=Object(i.useCallback)((function(e,t){c(function(e){return Array.isArray(e)?e[0]||0:e}(t))}),[c]);return Object(r.jsx)(Z.a,{className:t,value:a,defaultValue:0,max:n,onChange:o,disabled:0===n,ValueLabelComponent:ee})}var ae=a(131),ne=a(132);function ce(e){var t=e.isVisible,a=e.toggleIsVisible,n=Object(i.useMemo)((function(){return t?Object(r.jsx)(ae.a,{}):Object(r.jsx)(ne.a,{})}),[t]);return Object(r.jsx)(O.a,{"aria-label":"Toggle statistics",onClick:a,children:n})}var re="".concat(122,"px"),ie=Object(b.a)({interactiveRoot:{display:"flex",justifyContent:"space-between"},interactiveRootLeft:{alignItems:"center",display:"flex",flexDirection:"row"},root:{alignContent:"center",display:"flex",flexDirection:"column",height:90,padding:16},seeker:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between"}});function oe(e){var t=e.duration,a=e.currentTime,n=e.isPaused,o=e.togglePaused,l=e.isMuted,s=e.toggleMuted,u=e.updateCurrentTime,b=e.playbackRate,d=e.updatePlaybackRate,j=e.watchStartTime,O=ie(),f=Object(i.useContext)(w),v=Object(i.useContext)(T),g=Object(i.useState)("00:00:00"),h=Object(c.a)(g,2),x=h[0],p=h[1],y=Object(i.useState)(0),m=Object(c.a)(y,2),k=m[0],C=m[1],P=Object(i.useState)("00:00:00"),S=Object(c.a)(P,2),R=S[0],D=S[1],I=Object(i.useState)("00:00:00"),N=Object(c.a)(I,2),K=N[0],V=N[1];return Object(i.useEffect)((function(){p(M(a));var e=t-a;D(M(e));var n=parseFloat(b)||1;V(M(e/n))}),[a,t,b,j]),Object(i.useEffect)((function(){var e=setInterval((function(){C(Date.now())}),1e3);return function(){return clearInterval(e)}}),[j]),Object(r.jsxs)("div",{className:O.root,children:[Object(r.jsxs)("div",{className:O.seeker,children:[Object(r.jsx)(U,{children:x}),Object(r.jsx)(te,{currentTime:a,duration:t,updateCurrentTime:u}),Object(r.jsxs)(U,{children:["-",R,"/",M(t)]})]}),Object(r.jsxs)("div",{className:O.interactiveRoot,children:[Object(r.jsxs)("div",{className:O.interactiveRootLeft,children:[Object(r.jsx)(X,{isPaused:n,togglePaused:o}),Object(r.jsx)(z,{isMuted:l,toggleMuted:s}),Object(r.jsx)(ce,{isVisible:f,toggleIsVisible:v})]}),Object(r.jsx)(Q,{value:b,updateValue:d})]}),Object(r.jsx)(A,{time:x,duration:M(t),playbackRate:b,now:k,remainingTime:R,remainingAtRate:K,watchStartTime:j})]})}var le=Object(b.a)({root:{padding:"16px"}});function se(e){var t=e.children,a=Object(W.a)(),n=le();return Object(r.jsx)(E.a,{variant:"h6",style:{color:a.palette.text.primary},className:n.root,children:t||"Open a video file (Ctrl + O)"})}var ue=a(80),be=a(81);function de(e,t){return e.key===t.key&&(!t.ctrlKey||e.ctrlKey===t.ctrlKey)}function je(e){var t=e.addToCurrentTime,a=e.addToPlaybackRate,n=e.updatePlaybackRate,c=e.selectSrc,r=e.toggleMuted,o=e.togglePaused,l=e.toggleIsStatsVisible;return Object(i.useCallback)((function(e){!function(e,t){var a,n=Object(be.a)(t);try{for(n.s();!(a=n.n()).done;){var c=a.value;if(de(e,c))return c.onKeyDown(),void e.preventDefault()}}catch(r){n.e(r)}finally{n.f()}}(e,[{key:"m",onKeyDown:r},{key:" ",onKeyDown:o},{ctrlKey:!0,key:"o",onKeyDown:c},{key:"s",onKeyDown:l},{key:"ArrowLeft",onKeyDown:function(){return t(-10)}},{key:"ArrowRight",onKeyDown:function(){return t(10)}},{key:"ArrowUp",onKeyDown:function(){return a(1)}},{key:"ArrowDown",onKeyDown:function(){return a(-1)}},{key:"1",onKeyDown:function(){return n("1")}},{key:"2",onKeyDown:function(){return n("2")}},{key:"3",onKeyDown:function(){return n("3")}}])}),[t,a,c,r,o,l,n])}var Oe="PLAYBACK_RATE";var fe=Object(b.a)({root:{height:"100vh"},video:{height:"calc(100vh - ".concat("64px"," ")+"- ".concat(re," - 10px)"),width:"100vw"}}),ve=function(e){e.preventDefault()};function ge(e){var t=e.src,a=e.selectSrc,n=e.title,o=Object(i.useRef)(null),l=fe(),s=Object(i.useState)(0),u=Object(c.a)(s,2),b=u[0],d=u[1],j=Object(i.useState)(!1),O=Object(c.a)(j,2),f=O[0],v=O[1],g=Object(i.useState)(0),h=Object(c.a)(g,2),x=h[0],R=h[1],M=function(e,t){var a=Object(i.useState)(!0),n=Object(c.a)(a,2),r=n[0],o=n[1],l=Object(i.useCallback)((function(){e&&t&&(r?e.play():e.pause(),o(!r))}),[r,e,t]),s=Object(i.useCallback)((function(){o(!0)}),[]),u=Object(i.useCallback)((function(){o(!1)}),[]);return{isPaused:r,onPause:s,onPlay:u,setIsPaused:o,togglePaused:l}}(o.current,f),D=M.isPaused,I=M.setIsPaused,N=M.togglePaused,K=M.onPause,V=M.onPlay,A=function(){var e=Object(i.useState)(!1),t=Object(c.a)(e,2),a=t[0],n=t[1],r=Object(i.useCallback)((function(){n(!a)}),[a]);return{isMuted:a,setIsMuted:n,toggleMuted:r}}(),W=A.isMuted,E=A.toggleMuted,U=function(e,t){var a=Object(i.useState)(0),n=Object(c.a)(a,2),r=n[0],o=n[1],l=Object(i.useCallback)((function(t){e&&!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&(e.currentTime=t),o(t)}),[e]);return{addToCurrentTime:Object(i.useCallback)((function(a){if(e){var n=e.currentTime+a;n<0?n=0:n>t&&(n=t),l(n)}}),[t,l,e]),currentTime:r,onTimeUpdate:Object(i.useCallback)((function(){var t=null===e||void 0===e?void 0:e.currentTime;t&&l(t,!0)}),[l,e]),setCurrentTime:o,updateCurrentTime:l}}(o.current,x),B=U.currentTime,F=U.onTimeUpdate,z=U.updateCurrentTime,Y=U.addToCurrentTime,J=function(e){var t=Object(i.useState)(localStorage.getItem(Oe)||"1.0"),a=Object(c.a)(t,2),n=a[0],r=a[1],o=Object(i.useCallback)((function(t){var a,n=parseFloat(t)*q;isNaN(n)?a="":(n<4?n=4:n>30&&(n=30),a=(n/=q).toString(),e&&(e.playbackRate=n)),r(a),localStorage.setItem(Oe,a)}),[e]);return{addToPlaybackRate:Object(i.useCallback)((function(t){if(e){t=Math.ceil(t);var a=Math.round(e.playbackRate*q+t)/q;o(a.toString())}}),[o,e]),playbackRate:n,setPlaybackRate:r,updatePlaybackRate:o}}(o.current),X=J.playbackRate,_=J.updatePlaybackRate,G=J.addToPlaybackRate,Q=function(e,t){var a=Object(i.useState)(!0),n=Object(c.a)(a,2),r=n[0],o=n[1],l=Object(i.useCallback)((function(){o(!r)}),[r]),s=p(),u=Object(i.useCallback)((function(a){var n,c,r=null!==(n=null===a||void 0===a?void 0:a.x)&&void 0!==n?n:C(m),i=null!==(c=null===a||void 0===a?void 0:a.y)&&void 0!==c?c:C(y);return null===i||null===r?k(s,e,t):function(e,t,a,n){var c=e.innerHeight,r=e.innerWidth;return n.y<0?n.y=0:n.y+t>c&&(n.y=c-t),n.x<0?n.x=0:n.x+a>r&&(n.x=r-a),n}(s,e,t,{x:r,y:i})}),[s,e,t]),b=Object(i.useState)(u()),d=Object(c.a)(b,2),j=d[0],O=d[1],f=Object(i.useCallback)((function(e,t){var a=u({x:e,y:t});O(a),localStorage.setItem(m,a.x.toString()),localStorage.setItem(y,a.y.toString())}),[u]);return{isStatsVisible:r,position:j,toggleIsStatsVisible:l,updatePosition:f}}(H,L),Z=Q.isStatsVisible,$=Q.toggleIsStatsVisible,ee=Q.position,te=Q.updatePosition,ae=je({addToCurrentTime:Y,addToPlaybackRate:G,selectSrc:a,toggleIsStatsVisible:$,toggleMuted:E,togglePaused:N,updatePlaybackRate:_});Object(ue.a)("keydown",ae,document);var ne=function(e){var t=e.addToCurrentTime,a=e.addToPlaybackRate,n=Object(i.useCallback)((function(e){t(e/1e3*10)}),[t]),c=Object(i.useCallback)((function(e){a(-e/100*1)}),[a]);return Object(i.useCallback)((function(e){!function(e,t){e.deltaX&&t.x(e.deltaX),e.deltaY&&t.y(e.deltaY)}(e,{x:n,y:c})}),[n,c])}({addToCurrentTime:Y,addToPlaybackRate:G});Object(ue.a)("wheel",ne,document,{passive:!0});var ce,re=Object(i.useCallback)((function(){var e=o.current;v(!0),R((null===e||void 0===e?void 0:e.duration)||0),d(Date.now()),I(!1),null===e||void 0===e||e.play();var t=parseFloat(X);!isNaN(t)&&e&&(e.playbackRate=t)}),[X,I]);return ce={title:n},Object(i.useEffect)((function(){"mediaSession"in navigator&&navigator.mediaSession&&(navigator.mediaSession.metadata=new MediaMetadata(ce))}),[ce]),Object(r.jsxs)("div",{className:l.root,children:[Object(r.jsx)(se,{children:n}),Object(r.jsx)("video",{className:l.video,ref:o,src:t,muted:W,onLoadedMetadata:re,onTimeUpdate:F,onPause:K,onPlay:V,onContextMenu:ve}),Object(r.jsx)(w.Provider,{value:Z,children:Object(r.jsx)(T.Provider,{value:$,children:Object(r.jsx)(P.Provider,{value:ee,children:Object(r.jsx)(S.Provider,{value:te,children:Object(r.jsx)(oe,{isPaused:D,togglePaused:N,isMuted:W,toggleMuted:E,duration:x,currentTime:B,updateCurrentTime:z,playbackRate:X,updatePlaybackRate:_,watchStartTime:b})})})})})]})}var he=a(85),xe=function(e){e.preventDefault()};function pe(){var e=Object(l.a)("(prefers-color-scheme: dark)"),t=Object(i.useMemo)((function(){return Object(s.a)({palette:{type:e?"dark":"light"}})}),[e]),a=Object(i.useState)(""),o=Object(c.a)(a,2),b=o[0],d=o[1],j=Object(i.useState)(""),O=Object(c.a)(j,2),f=O[0],v=O[1],g=Object(i.useRef)(null),h=Object(i.useCallback)((function(e){var t=e[0];v(t.name),URL.revokeObjectURL(b);var a=URL.createObjectURL(t);d(a)}),[b]),x=Object(i.useCallback)((function(e){var t;(null===(t=e.currentTarget.files)||void 0===t?void 0:t.length)&&h([e.currentTarget.files[0]])}),[h]),p=Object(he.a)({onDrop:h}),y=p.getRootProps,m=p.getInputProps,k=Object(i.useCallback)((function(){var e;null===(e=g.current)||void 0===e||e.click()}),[]);return Object(r.jsx)(u.a,{theme:t,children:Object(r.jsxs)("div",Object(n.a)(Object(n.a)({},y()),{},{style:{backgroundColor:t.palette.background.default},children:[Object(r.jsx)("input",{"aria-label":"Press Ctrl+O to open a video from the local filesystem",ref:g,type:"file",accept:"video/*,audio/*",onChange:x,style:{display:"none"}}),Object(r.jsx)("input",Object(n.a)(Object(n.a)({},m()),{},{style:{display:"none"},onClick:xe})),Object(r.jsx)(ge,{src:b,selectSrc:k,title:f})]}))})}}}]);
//# sourceMappingURL=4.8bcb9782.chunk.js.map