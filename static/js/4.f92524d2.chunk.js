(this["webpackJsonpvideo-player"]=this["webpackJsonpvideo-player"]||[]).push([[4],{139:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return me}));var n=a(20),r=a(0),l=a.n(r),c=a(136),u=a(90),o=a(137),i=a(114),s=a(120),d=a(141);function b(e){var t=e.isMuted,a=e.toggleMuted,n=Object(r.useMemo)((function(){return t?l.a.createElement(i.a,null):l.a.createElement(s.a,null)}),[t]);return l.a.createElement(d.a,{"aria-label":"Toggle muted",onClick:a},n)}var m=a(121),f=a(122);function v(e){var t=e.isPaused,a=e.togglePaused,n=Object(r.useMemo)((function(){return t?l.a.createElement(m.a,null):l.a.createElement(f.a,null)}),[t]);return l.a.createElement(d.a,{"aria-label":"Toggle paused",onClick:a},n)}var g=a(123),p=a(138);var y=Object(g.a)({root:{padding:16}});function O(e){var t=e.value,a=e.updateValue,n=y(),c=Object(r.useCallback)((function(e){a(e.currentTarget.value)}),[a]),u=Object(r.useCallback)((function(){var e=parseFloat(t);isNaN(e)&&a("1.0")}),[a,t]);return l.a.createElement(p.a,{className:n.root,"aria-label":"Video playback rate",type:"number",value:t,onChange:c,onBlur:u,inputProps:{step:1,"aria-label":"Video playback rate"}})}var j=a(144),E=a(143),k=a(73),C=a.n(k);function h(e){return new Date(1e3*e).toISOString().substr(11,8)}function T(e){var t=e.children,a=e.open,n=h(e.value);return l.a.createElement(E.a,{open:a,enterTouchDelay:0,placement:"top",title:n},t)}function P(e){var t=e.className,a=e.currentTime,n=e.duration,c=e.updateCurrentTime,u=Object(r.useCallback)((function(e,t){c(function(e){return Array.isArray(e)?e[0]||0:e}(t))}),[c]);return l.a.createElement(j.a,{className:t,value:a,defaultValue:0,max:n,onChange:u,disabled:0===n,ValueLabelComponent:T})}var S=a(26),w=a(126);function R(e){var t=e.children,a=Object(S.a)();return l.a.createElement(w.a,{style:{color:a.palette.text.primary,padding:8}},t)}var x=a(127),M=a(128),D=a(130),I=a(131),N=a(132),V=a(133),K=a(77),A=a.n(K),L=a(56),U=a.n(L),H="statistics.position.y",W="statistics.position.x",B=function(e,t,a){var n=Math.floor(t/2),r=Math.floor(a/2),l=Math.floor(e.innerHeight/2);return{x:Math.floor(e.innerWidth/2)-r,y:l-n}},F=function(e){var t=localStorage.getItem(e);if(null===t)return null;var a=parseFloat(t);return isNaN(a)?null:a};var Y=l.a.createContext(!1),z=l.a.createContext((function(){})),J=l.a.createContext(B({innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth},Q,Z)),X=l.a.createContext((function(e,t){})),_=a(129),q=Object(g.a)({root:{position:"absolute",width:400,top:0,left:0},closeButton:{float:"right"}});function G(e){var t=e.time,a=e.duration,c=e.playbackRate,u=e.now,o=e.remainingTime,i=e.remainingAtRate,s=e.watchStartTime,b=q(),m=Object(r.useRef)(null),f=Object(r.useContext)(Y),v=Object(r.useContext)(z),g=Object(r.useContext)(J),p=Object(r.useContext)(X),y=U()(),O=Object(r.useState)(-1),j=Object(n.a)(O,2),E=j[0],k=j[1];Object(r.useEffect)((function(){k(f?100:-1)}),[f,g,E]),Object(r.useEffect)((function(){p()}),[p,y]);var T=Object(r.useMemo)((function(){return h((u-s)/1e3)}),[u,s]),P=Object(r.useCallback)((function(e){if(m.current){var t=m.current.getBoundingClientRect(),a=t.top,n=t.left;p(n,a)}}),[p]);return l.a.createElement(A.a,{nodeRef:m,bounds:"body",onStop:P,position:g},l.a.createElement("span",{ref:m,className:b.root,style:{zIndex:E}},l.a.createElement(x.a,{style:{opacity:.8}},l.a.createElement(M.a,null,l.a.createElement(d.a,{"aria-label":"Close statistics panel",className:b.closeButton,onClick:v},l.a.createElement(_.a,null)),l.a.createElement(D.a,{size:"small"},l.a.createElement(I.a,null,l.a.createElement(N.a,null,l.a.createElement(V.a,null,"Current time"),l.a.createElement(V.a,null,t)),l.a.createElement(N.a,null,l.a.createElement(V.a,null,"Duration"),l.a.createElement(V.a,null,a)),l.a.createElement(N.a,null,l.a.createElement(V.a,null,"Playback rate"),l.a.createElement(V.a,null,c)),l.a.createElement(N.a,null,l.a.createElement(V.a,null,"Remaining time"),l.a.createElement(V.a,null,o)),l.a.createElement(N.a,null,l.a.createElement(V.a,null,"Remaining at \xd7",c),l.a.createElement(V.a,null,i)),l.a.createElement(N.a,null,l.a.createElement(V.a,null,"Watch start time"),l.a.createElement(V.a,null,function(e){var t=new Date(0);return t.setUTCMilliseconds(e),C()(t).format("HH:MM:SS")}(s))),l.a.createElement(N.a,null,l.a.createElement(V.a,null,"Watching for"),l.a.createElement(V.a,null,T))))))))}var Q=319,Z=400,$=a(134),ee=a(135);function te(e){var t=e.isVisible,a=e.toggleIsVisible,n=Object(r.useMemo)((function(){return t?l.a.createElement($.a,null):l.a.createElement(ee.a,null)}),[t]);return l.a.createElement(d.a,{"aria-label":"Toggle statistics",onClick:a},n)}var ae="".concat(122,"px"),ne=Object(g.a)({root:{height:90,display:"flex",alignContent:"center",flexDirection:"column",padding:16},seeker:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between"},interactiveRoot:{display:"flex",justifyContent:"space-between"},interactiveRootLeft:{display:"flex",flexDirection:"row",alignItems:"center"}});function re(e){var t=e.duration,a=e.currentTime,c=e.isPaused,u=e.togglePaused,o=e.isMuted,i=e.toggleMuted,s=e.updateCurrentTime,d=e.playbackRate,m=e.updatePlaybackRate,f=e.watchStartTime,g=ne(),p=Object(r.useContext)(Y),y=Object(r.useContext)(z),j=Object(r.useState)("00:00:00"),E=Object(n.a)(j,2),k=E[0],C=E[1],T=Object(r.useState)(0),S=Object(n.a)(T,2),w=S[0],x=S[1],M=Object(r.useState)("00:00:00"),D=Object(n.a)(M,2),I=D[0],N=D[1],V=Object(r.useState)("00:00:00"),K=Object(n.a)(V,2),A=K[0],L=K[1];return Object(r.useEffect)((function(){C(h(a));var e=t-a;N(h(e));var n=parseFloat(d)||1;L(h(e/n))}),[a,t,d,f]),Object(r.useEffect)((function(){var e=setInterval((function(){x(Date.now())}),1e3);return function(){return clearInterval(e)}}),[f]),l.a.createElement("div",{className:g.root},l.a.createElement("div",{className:g.seeker},l.a.createElement(R,null,k),l.a.createElement(P,{currentTime:a,duration:t,updateCurrentTime:s}),l.a.createElement(R,null,"-",I,"/",h(t))),l.a.createElement("div",{className:g.interactiveRoot},l.a.createElement("div",{className:g.interactiveRootLeft},l.a.createElement(v,{isPaused:c,togglePaused:u}),l.a.createElement(b,{isMuted:o,toggleMuted:i}),l.a.createElement(te,{isVisible:p,toggleIsVisible:y})),l.a.createElement(O,{value:d,updateValue:m})),l.a.createElement(G,{time:k,duration:h(t),playbackRate:d,now:w,remainingTime:I,remainingAtRate:A,watchStartTime:f}))}var le=Object(g.a)({root:{padding:"16px"}});function ce(e){var t=e.children,a=Object(S.a)(),n=le();return l.a.createElement(w.a,{variant:"h6",style:{color:a.palette.text.primary},className:n.root},t||"Open a video file (Ctrl + O)")}var ue=a(88),oe=a(89);function ie(e,t){return e.key===t.key&&(!t.ctrlKey||e.ctrlKey===t.ctrlKey)}function se(e){var t=e.addToCurrentTime,a=e.addToPlaybackRate,n=e.selectSrc,l=[{key:"m",onKeyDown:e.toggleMuted},{key:" ",onKeyDown:e.togglePaused},{key:"o",ctrlKey:!0,onKeyDown:n},{key:"s",onKeyDown:e.toggleIsStatsVisible},{key:"ArrowLeft",onKeyDown:function(){return t(-10)}},{key:"ArrowRight",onKeyDown:function(){return t(10)}},{key:"ArrowUp",onKeyDown:function(){return a(1)}},{key:"ArrowDown",onKeyDown:function(){return a(-1)}}];return Object(r.useCallback)((function(e){!function(e,t){var a,n=Object(oe.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(ie(e,r))return r.onKeyDown(),void e.preventDefault()}}catch(l){n.e(l)}finally{n.f()}}(e,l)}),[l])}var de=Object(g.a)({root:{height:"100vh"},video:{height:"calc(100vh - ".concat("64px"," ")+"- ".concat(ae," - 10px)"),width:"100vw"}});function be(e){var t=e.src,a=e.selectSrc,c=e.title,u=Object(r.useRef)(null),o=de(),i=Object(r.useState)(0),s=Object(n.a)(i,2),d=s[0],b=s[1],m=Object(r.useState)(!1),f=Object(n.a)(m,2),v=f[0],g=f[1],p=Object(r.useState)(0),y=Object(n.a)(p,2),O=y[0],j=y[1],E=function(e,t){var a=Object(r.useState)(!0),l=Object(n.a)(a,2),c=l[0],u=l[1],o=Object(r.useCallback)((function(){e&&t&&(c?e.play():e.pause(),u(!c))}),[c,e,t]),i=Object(r.useCallback)((function(){u(!0)}),[]),s=Object(r.useCallback)((function(){u(!1)}),[]);return{isPaused:c,setIsPaused:u,togglePaused:o,onPause:i,onPlay:s}}(u.current,v),k=E.isPaused,C=E.setIsPaused,h=E.togglePaused,T=E.onPause,P=E.onPlay,S=function(e){var t=Object(r.useState)(!1),a=Object(n.a)(t,2),l=a[0],c=a[1],u=Object(r.useCallback)((function(){c(!l)}),[l]);return{isMuted:l,setIsMuted:c,toggleMuted:u}}(u.current),w=S.isMuted,R=S.toggleMuted,x=function(e,t){var a=Object(r.useState)(0),l=Object(n.a)(a,2),c=l[0],u=l[1],o=Object(r.useCallback)((function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&!a&&(e.currentTime=t),u(t)}),[e]),i=Object(r.useCallback)((function(a){if(e){var n=e.currentTime+a;n<0?n=0:n>t&&(n=t),o(n)}}),[t,o,e]),s=Object(r.useCallback)((function(){var t=null===e||void 0===e?void 0:e.currentTime;t&&o(t,!0)}),[o,e]);return{currentTime:c,setCurrentTime:u,updateCurrentTime:o,addToCurrentTime:i,onTimeUpdate:s}}(u.current,O),M=x.currentTime,D=x.onTimeUpdate,I=x.updateCurrentTime,N=x.addToCurrentTime,V=function(e){var t=Object(r.useState)(localStorage.getItem("PLAYBACK_RATE")||"1.0"),a=Object(n.a)(t,2),l=a[0],c=a[1],u=Object(r.useCallback)((function(t){var a,n=10*parseFloat(t);isNaN(n)?a="":(n<4?n=4:n>30&&(n=30),a=(n/=10).toString(),e&&(e.playbackRate=n)),c(a),localStorage.setItem("PLAYBACK_RATE",a)}),[e]),o=Object(r.useCallback)((function(t){if(e){t=Math.ceil(t);var a=Math.round(10*e.playbackRate+t)/10;u(a.toString())}}),[u,e]);return{playbackRate:l,setPlaybackRate:c,updatePlaybackRate:u,addToPlaybackRate:o}}(u.current),K=V.playbackRate,A=V.updatePlaybackRate,L=V.addToPlaybackRate,_=function(e,t){var a=Object(r.useState)(!0),l=Object(n.a)(a,2),c=l[0],u=l[1],o=Object(r.useCallback)((function(){u(!c)}),[c]),i=U()(),s=Object(r.useCallback)((function(a){var n,r,l=null!==(n=null===a||void 0===a?void 0:a.x)&&void 0!==n?n:F(W),c=null!==(r=null===a||void 0===a?void 0:a.y)&&void 0!==r?r:F(H);return null===c||null===l?B(i,e,t):function(e,t,a,n){var r=e.innerHeight,l=e.innerWidth;return n.y<0?n.y=0:n.y+t>r&&(n.y=r-t),n.x<0?n.x=0:n.x+a>l&&(n.x=l-a),n}(i,e,t,{y:c,x:l})}),[i,e,t]),d=Object(r.useState)(s()),b=Object(n.a)(d,2),m=b[0],f=b[1],v=Object(r.useCallback)((function(e,t){var a=s({x:e,y:t});f(a),localStorage.setItem(W,a.x.toString()),localStorage.setItem(H,a.y.toString())}),[s]);return{isStatsVisible:c,toggleIsStatsVisible:o,position:m,updatePosition:v}}(Q,Z),q=_.isStatsVisible,G=_.toggleIsStatsVisible,$=_.position,ee=_.updatePosition,te=se({addToCurrentTime:N,addToPlaybackRate:L,selectSrc:a,toggleMuted:R,togglePaused:h,toggleIsStatsVisible:G});Object(ue.a)("keydown",te,document);var ae=function(e){var t=e.addToCurrentTime,a=e.addToPlaybackRate,n={x:Object(r.useCallback)((function(e){t(e/1e3*10)}),[t]),y:Object(r.useCallback)((function(e){a(-e/100*1)}),[a])};return Object(r.useCallback)((function(e){!function(e,t){e.deltaX&&t.x(e.deltaX),e.deltaY&&t.y(e.deltaY)}(e,n)}),[n])}({addToCurrentTime:N,addToPlaybackRate:L});Object(ue.a)("wheel",ae,document,{passive:!0});var ne=Object(r.useCallback)((function(){var e=u.current;g(!0),j((null===e||void 0===e?void 0:e.duration)||0),b(Date.now()),C(!1),null===e||void 0===e||e.play();var t=parseFloat(K);!isNaN(t)&&e&&(e.playbackRate=t)}),[K,C]);return l.a.createElement("div",{className:o.root},l.a.createElement(ce,null,c),l.a.createElement("video",{className:o.video,ref:u,src:t,muted:w,onLoadedMetadata:ne,onTimeUpdate:D,onPause:T,onPlay:P}),l.a.createElement(Y.Provider,{value:q},l.a.createElement(z.Provider,{value:G},l.a.createElement(J.Provider,{value:$},l.a.createElement(X.Provider,{value:ee},l.a.createElement(re,{isPaused:k,togglePaused:h,isMuted:w,toggleMuted:R,duration:O,currentTime:M,updateCurrentTime:I,playbackRate:K,updatePlaybackRate:A,watchStartTime:d}))))))}function me(){var e=Object(c.a)("(prefers-color-scheme: dark)"),t=Object(r.useMemo)((function(){return Object(u.a)({palette:{type:e?"dark":"light"}})}),[e]),a=Object(r.useState)(""),i=Object(n.a)(a,2),s=i[0],d=i[1],b=Object(r.useState)(""),m=Object(n.a)(b,2),f=m[0],v=m[1],g=Object(r.useRef)(null),p=Object(r.useCallback)((function(e){var t;if(null===(t=e.currentTarget.files)||void 0===t?void 0:t.length){var a=e.currentTarget.files[0];v(a.name),URL.revokeObjectURL(s);var n=URL.createObjectURL(a);d(n)}}),[s]),y=Object(r.useCallback)((function(){var e;null===(e=g.current)||void 0===e||e.click()}),[]);return l.a.createElement(o.a,{theme:t},l.a.createElement("div",{style:{backgroundColor:t.palette.background.default}},l.a.createElement("input",{"aria-label":"Press Ctrl+O to open a video from the local filesystem",ref:g,type:"file",accept:"video/*",onChange:p,style:{display:"none"}}),l.a.createElement(be,{src:s,selectSrc:y,title:f})))}}}]);
//# sourceMappingURL=4.f92524d2.chunk.js.map