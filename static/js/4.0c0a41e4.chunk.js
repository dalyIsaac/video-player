(this["webpackJsonpvideo-player"]=this["webpackJsonpvideo-player"]||[]).push([[4],{138:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return xe}));var n=a(88),c=a(21),r=a(1),i=a.n(r),o=a(136),l=a(86),s=a(137),u=a(114),b=a(119),d=a(122),j=a(141),O=a(124),f=a(125),v=a(126),g=a(127),h=function(){return{innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth}},p=function(){var e=Object(r.useState)(h()),t=Object(c.a)(e,2),a=t[0],n=t[1];function i(){n(h())}return Object(r.useEffect)((function(){return window.addEventListener("resize",i),function(){window.removeEventListener("resize",i)}}),[]),a},x="statistics.position.y",y="statistics.position.x",m=function(e,t,a){var n=Math.floor(t/2),c=Math.floor(a/2),r=Math.floor(e.innerHeight/2);return{x:Math.floor(e.innerWidth/2)-c,y:r-n}},k=function(e){var t=localStorage.getItem(e);if(null===t)return null;var a=parseFloat(t);return isNaN(a)?null:a};var C=i.a.createContext(!1),w=i.a.createContext((function(){console.log("ToggleStatisticsVisible's context has not yet been set.")})),T=i.a.createContext(m({innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth},H,L)),P=i.a.createContext((function(e,t){console.log("UpdateStatisticsPosition's context has not yet been set.")})),S=a(85);function R(e){return new Date(1e3*e).toISOString().substr(11,8)}function M(e){var t=new Date(e);return Object(S.a)(t,"HH:mm:ss")}var D=a(123),I=a(66),N=a.n(I),K=a(0),V=Object(u.a)({closeButton:{float:"right"},root:{left:0,position:"absolute",top:0,width:250}});function A(e){var t=e.time,a=e.duration,n=e.playbackRate,i=e.now,o=e.remainingTime,l=e.remainingAtRate,s=e.watchStartTime,u=V(),h=Object(r.useRef)(null),x=Object(r.useContext)(C),y=Object(r.useContext)(w),m=Object(r.useContext)(T),k=Object(r.useContext)(P),S=p(),I=Object(r.useState)(-1),A=Object(c.a)(I,2),H=A[0],L=A[1];Object(r.useEffect)((function(){L(x?100:-1)}),[x,m,H]),Object(r.useEffect)((function(){k()}),[k,S]);var W=Object(r.useMemo)((function(){var e=0;return 0!==s&&(e=(i-s)/1e3),R(e)}),[i,s]),E=Object(r.useCallback)((function(){if(h.current){var e=h.current.getBoundingClientRect(),t=e.top,a=e.left;k(a,t)}}),[k]);return Object(K.jsx)(N.a,{nodeRef:h,bounds:"body",onStop:E,position:m,children:Object(K.jsx)("span",{ref:h,className:u.root,style:{zIndex:H},children:Object(K.jsx)(b.a,{style:{opacity:.8},children:Object(K.jsxs)(d.a,{style:{padding:0},children:[Object(K.jsx)(j.a,{"aria-label":"Close statistics panel",className:u.closeButton,onClick:y,children:Object(K.jsx)(D.a,{})}),Object(K.jsx)(O.a,{size:"small",children:Object(K.jsxs)(f.a,{children:[Object(K.jsxs)(v.a,{children:[Object(K.jsx)(g.a,{children:"Current time"}),Object(K.jsx)(g.a,{children:t})]}),Object(K.jsxs)(v.a,{children:[Object(K.jsx)(g.a,{children:"Watching for"}),Object(K.jsx)(g.a,{children:W})]}),Object(K.jsxs)(v.a,{children:[Object(K.jsx)(g.a,{children:"Duration"}),Object(K.jsx)(g.a,{children:a})]}),Object(K.jsxs)(v.a,{children:[Object(K.jsx)(g.a,{children:"Playback rate"}),Object(K.jsx)(g.a,{children:n})]}),Object(K.jsxs)(v.a,{children:[Object(K.jsx)(g.a,{children:"Remaining time"}),Object(K.jsx)(g.a,{children:o})]}),Object(K.jsxs)(v.a,{children:[Object(K.jsxs)(g.a,{children:["Remaining at \xd7",n]}),Object(K.jsx)(g.a,{children:l})]}),Object(K.jsxs)(v.a,{children:[Object(K.jsx)(g.a,{children:"Watch start time"}),Object(K.jsx)(g.a,{children:0===s?"N/A":M(s)})]})]})})]})})})})}var H=319,L=400,W=a(28),E=a(128);function U(e){var t=e.children,a=Object(W.a)();return Object(K.jsx)(E.a,{style:{color:a.palette.text.primary,padding:8},children:t})}var B=a(129),F=a(130);function z(e){var t=e.isMuted,a=e.toggleMuted,n=Object(r.useMemo)((function(){return t?Object(K.jsx)(B.a,{}):Object(K.jsx)(F.a,{})}),[t]);return Object(K.jsx)(j.a,{"aria-label":"Toggle muted",onClick:a,children:n})}var Y=a(131),J=a(132);function X(e){var t=e.isPaused,a=e.togglePaused,n=Object(r.useMemo)((function(){return t?Object(K.jsx)(Y.a,{}):Object(K.jsx)(J.a,{})}),[t]);return Object(K.jsx)(j.a,{"aria-label":"Toggle paused",onClick:a,children:n})}var _=a(139),q=Object(u.a)({root:{padding:16}});function G(e){var t=e.value,a=e.updateValue,n=q(),c=Object(r.useCallback)((function(e){a(e.currentTarget.value)}),[a]),i=Object(r.useCallback)((function(){var e=parseFloat(t);isNaN(e)&&a("1.0")}),[a,t]);return Object(K.jsx)(_.a,{className:n.root,"aria-label":"Video playback rate",type:"number",value:t,onChange:c,onBlur:i,inputProps:{"aria-label":"Video playback rate",step:.1}})}var Q=10;var Z=a(144),$=a(143);function ee(e){var t=e.children,a=e.open,n=R(e.value);return Object(K.jsx)($.a,{open:a,enterTouchDelay:0,placement:"top",title:n,children:t})}function te(e){var t=e.className,a=e.currentTime,n=e.duration,c=e.updateCurrentTime,i=Object(r.useCallback)((function(e,t){c(function(e){return Array.isArray(e)?e[0]||0:e}(t))}),[c]);return Object(K.jsx)(Z.a,{className:t,value:a,defaultValue:0,max:n,onChange:i,disabled:0===n,ValueLabelComponent:ee})}var ae=a(134),ne=a(135);function ce(e){var t=e.isVisible,a=e.toggleIsVisible,n=Object(r.useMemo)((function(){return t?Object(K.jsx)(ae.a,{}):Object(K.jsx)(ne.a,{})}),[t]);return Object(K.jsx)(j.a,{"aria-label":"Toggle statistics",onClick:a,children:n})}var re="".concat(122,"px"),ie=Object(u.a)({interactiveRoot:{display:"flex",justifyContent:"space-between"},interactiveRootLeft:{alignItems:"center",display:"flex",flexDirection:"row"},root:{alignContent:"center",display:"flex",flexDirection:"column",height:90,padding:16},seeker:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between"}});function oe(e){var t=e.duration,a=e.currentTime,n=e.isPaused,i=e.togglePaused,o=e.isMuted,l=e.toggleMuted,s=e.updateCurrentTime,u=e.playbackRate,b=e.updatePlaybackRate,d=e.watchStartTime,j=ie(),O=Object(r.useContext)(C),f=Object(r.useContext)(w),v=Object(r.useState)("00:00:00"),g=Object(c.a)(v,2),h=g[0],p=g[1],x=Object(r.useState)(0),y=Object(c.a)(x,2),m=y[0],k=y[1],T=Object(r.useState)("00:00:00"),P=Object(c.a)(T,2),S=P[0],M=P[1],D=Object(r.useState)("00:00:00"),I=Object(c.a)(D,2),N=I[0],V=I[1];return Object(r.useEffect)((function(){p(R(a));var e=t-a;M(R(e));var n=parseFloat(u)||1;V(R(e/n))}),[a,t,u,d]),Object(r.useEffect)((function(){var e=setInterval((function(){k(Date.now())}),1e3);return function(){return clearInterval(e)}}),[d]),Object(K.jsxs)("div",{className:j.root,children:[Object(K.jsxs)("div",{className:j.seeker,children:[Object(K.jsx)(U,{children:h}),Object(K.jsx)(te,{currentTime:a,duration:t,updateCurrentTime:s}),Object(K.jsxs)(U,{children:["-",S,"/",R(t)]})]}),Object(K.jsxs)("div",{className:j.interactiveRoot,children:[Object(K.jsxs)("div",{className:j.interactiveRootLeft,children:[Object(K.jsx)(X,{isPaused:n,togglePaused:i}),Object(K.jsx)(z,{isMuted:o,toggleMuted:l}),Object(K.jsx)(ce,{isVisible:O,toggleIsVisible:f})]}),Object(K.jsx)(G,{value:u,updateValue:b})]}),Object(K.jsx)(A,{time:h,duration:R(t),playbackRate:u,now:m,remainingTime:S,remainingAtRate:N,watchStartTime:d})]})}var le=Object(u.a)({root:{padding:"16px"}});function se(e){var t=e.children,a=Object(W.a)(),n=le();return Object(K.jsx)(E.a,{variant:"h6",style:{color:a.palette.text.primary},className:n.root,children:t||"Open a video file (Ctrl + O)"})}var ue=a(82),be=a(83);function de(e,t){return e.key===t.key&&(!t.ctrlKey||e.ctrlKey===t.ctrlKey)}function je(e){var t=e.addToCurrentTime,a=e.addToPlaybackRate,n=e.updatePlaybackRate,c=e.selectSrc,i=e.toggleMuted,o=e.togglePaused,l=e.toggleIsStatsVisible;return Object(r.useCallback)((function(e){!function(e,t){var a,n=Object(be.a)(t);try{for(n.s();!(a=n.n()).done;){var c=a.value;if(de(e,c))return c.onKeyDown(),void e.preventDefault()}}catch(r){n.e(r)}finally{n.f()}}(e,[{key:"m",onKeyDown:i},{key:" ",onKeyDown:o},{ctrlKey:!0,key:"o",onKeyDown:c},{key:"s",onKeyDown:l},{key:"ArrowLeft",onKeyDown:function(){return t(-10)}},{key:"ArrowRight",onKeyDown:function(){return t(10)}},{key:"ArrowUp",onKeyDown:function(){return a(1)}},{key:"ArrowDown",onKeyDown:function(){return a(-1)}},{key:"1",onKeyDown:function(){return n("1")}},{key:"2",onKeyDown:function(){return n("2")}},{key:"3",onKeyDown:function(){return n("3")}}])}),[t,a,c,i,o,l,n])}var Oe="PLAYBACK_RATE";var fe=Object(u.a)({root:{height:"100vh"},video:{height:"calc(100vh - ".concat("64px"," ")+"- ".concat(re," - 10px)"),width:"100vw"}}),ve=function(e){e.preventDefault()};function ge(e){var t=e.src,a=e.selectSrc,n=e.title,i=Object(r.useRef)(null),o=fe(),l=Object(r.useState)(0),s=Object(c.a)(l,2),u=s[0],b=s[1],d=Object(r.useState)(!1),j=Object(c.a)(d,2),O=j[0],f=j[1],v=Object(r.useState)(0),g=Object(c.a)(v,2),h=g[0],S=g[1],R=function(e,t){var a=Object(r.useState)(!0),n=Object(c.a)(a,2),i=n[0],o=n[1],l=Object(r.useCallback)((function(){e&&t&&(i?e.play():e.pause(),o(!i))}),[i,e,t]),s=Object(r.useCallback)((function(){o(!0)}),[]),u=Object(r.useCallback)((function(){o(!1)}),[]);return{isPaused:i,onPause:s,onPlay:u,setIsPaused:o,togglePaused:l}}(i.current,O),M=R.isPaused,D=R.setIsPaused,I=R.togglePaused,N=R.onPause,V=R.onPlay,A=function(){var e=Object(r.useState)(!1),t=Object(c.a)(e,2),a=t[0],n=t[1],i=Object(r.useCallback)((function(){n(!a)}),[a]);return{isMuted:a,setIsMuted:n,toggleMuted:i}}(),W=A.isMuted,E=A.toggleMuted,U=function(e,t){var a=Object(r.useState)(0),n=Object(c.a)(a,2),i=n[0],o=n[1],l=Object(r.useCallback)((function(t){e&&!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&(e.currentTime=t),o(t)}),[e]);return{addToCurrentTime:Object(r.useCallback)((function(a){if(e){var n=e.currentTime+a;n<0?n=0:n>t&&(n=t),l(n)}}),[t,l,e]),currentTime:i,onTimeUpdate:Object(r.useCallback)((function(){var t=null===e||void 0===e?void 0:e.currentTime;t&&l(t,!0)}),[l,e]),setCurrentTime:o,updateCurrentTime:l}}(i.current,h),B=U.currentTime,F=U.onTimeUpdate,z=U.updateCurrentTime,Y=U.addToCurrentTime,J=function(e){var t=Object(r.useState)(localStorage.getItem(Oe)||"1.0"),a=Object(c.a)(t,2),n=a[0],i=a[1],o=Object(r.useCallback)((function(t){var a,n=parseFloat(t)*Q;isNaN(n)?a="":(n<4?n=4:n>30&&(n=30),a=(n/=Q).toString(),e&&(e.playbackRate=n)),i(a),localStorage.setItem(Oe,a)}),[e]);return{addToPlaybackRate:Object(r.useCallback)((function(t){if(e){t=Math.ceil(t);var a=Math.round(e.playbackRate*Q+t)/Q;o(a.toString())}}),[o,e]),playbackRate:n,setPlaybackRate:i,updatePlaybackRate:o}}(i.current),X=J.playbackRate,_=J.updatePlaybackRate,q=J.addToPlaybackRate,G=function(e,t){var a=Object(r.useState)(!0),n=Object(c.a)(a,2),i=n[0],o=n[1],l=Object(r.useCallback)((function(){o(!i)}),[i]),s=p(),u=Object(r.useCallback)((function(a){var n,c,r=null!==(n=null===a||void 0===a?void 0:a.x)&&void 0!==n?n:k(y),i=null!==(c=null===a||void 0===a?void 0:a.y)&&void 0!==c?c:k(x);return null===i||null===r?m(s,e,t):function(e,t,a,n){var c=e.innerHeight,r=e.innerWidth;return n.y<0?n.y=0:n.y+t>c&&(n.y=c-t),n.x<0?n.x=0:n.x+a>r&&(n.x=r-a),n}(s,e,t,{x:r,y:i})}),[s,e,t]),b=Object(r.useState)(u()),d=Object(c.a)(b,2),j=d[0],O=d[1],f=Object(r.useCallback)((function(e,t){var a=u({x:e,y:t});O(a),localStorage.setItem(y,a.x.toString()),localStorage.setItem(x,a.y.toString())}),[u]);return{isStatsVisible:i,position:j,toggleIsStatsVisible:l,updatePosition:f}}(H,L),Z=G.isStatsVisible,$=G.toggleIsStatsVisible,ee=G.position,te=G.updatePosition,ae=je({addToCurrentTime:Y,addToPlaybackRate:q,selectSrc:a,toggleIsStatsVisible:$,toggleMuted:E,togglePaused:I,updatePlaybackRate:_});Object(ue.a)("keydown",ae,document);var ne=function(e){var t=e.addToCurrentTime,a=e.addToPlaybackRate,n=Object(r.useCallback)((function(e){t(e/1e3*10)}),[t]),c=Object(r.useCallback)((function(e){a(-e/100*1)}),[a]);return Object(r.useCallback)((function(e){!function(e,t){e.deltaX&&t.x(e.deltaX),e.deltaY&&t.y(e.deltaY)}(e,{x:n,y:c})}),[n,c])}({addToCurrentTime:Y,addToPlaybackRate:q});Object(ue.a)("wheel",ne,document,{passive:!0});var ce,re=Object(r.useCallback)((function(){var e=i.current;f(!0),S((null===e||void 0===e?void 0:e.duration)||0),b(Date.now()),D(!1),null===e||void 0===e||e.play();var t=parseFloat(X);!isNaN(t)&&e&&(e.playbackRate=t)}),[X,D]);return ce={title:n},Object(r.useEffect)((function(){"mediaSession"in navigator&&navigator.mediaSession&&(navigator.mediaSession.metadata=new MediaMetadata(ce))}),[ce]),Object(K.jsxs)("div",{className:o.root,children:[Object(K.jsx)(se,{children:n}),Object(K.jsx)("video",{className:o.video,ref:i,src:t,muted:W,onLoadedMetadata:re,onTimeUpdate:F,onPause:N,onPlay:V,onContextMenu:ve}),Object(K.jsx)(C.Provider,{value:Z,children:Object(K.jsx)(w.Provider,{value:$,children:Object(K.jsx)(T.Provider,{value:ee,children:Object(K.jsx)(P.Provider,{value:te,children:Object(K.jsx)(oe,{isPaused:M,togglePaused:I,isMuted:W,toggleMuted:E,duration:h,currentTime:B,updateCurrentTime:z,playbackRate:X,updatePlaybackRate:_,watchStartTime:u})})})})})]})}var he=a(87),pe=function(e){e.preventDefault()};function xe(){var e=Object(o.a)("(prefers-color-scheme: dark)"),t=Object(r.useMemo)((function(){return Object(l.a)({palette:{type:e?"dark":"light"}})}),[e]),a=Object(r.useState)(""),i=Object(c.a)(a,2),u=i[0],b=i[1],d=Object(r.useState)(""),j=Object(c.a)(d,2),O=j[0],f=j[1],v=Object(r.useRef)(null),g=Object(r.useCallback)((function(e){var t=e[0];f(t.name),URL.revokeObjectURL(u);var a=URL.createObjectURL(t);b(a)}),[u]),h=Object(r.useCallback)((function(e){var t;(null===(t=e.currentTarget.files)||void 0===t?void 0:t.length)&&g([e.currentTarget.files[0]])}),[g]),p=Object(he.a)({onDrop:g}),x=p.getRootProps,y=p.getInputProps,m=Object(r.useCallback)((function(){var e;null===(e=v.current)||void 0===e||e.click()}),[]);return Object(K.jsx)(s.a,{theme:t,children:Object(K.jsxs)("div",Object(n.a)(Object(n.a)({},x()),{},{style:{backgroundColor:t.palette.background.default},children:[Object(K.jsx)("input",{"aria-label":"Press Ctrl+O to open a video from the local filesystem",ref:v,type:"file",accept:"video/*,audio/*",onChange:h,style:{display:"none"}}),Object(K.jsx)("input",Object(n.a)(Object(n.a)({},y()),{},{style:{display:"none"},onClick:pe})),Object(K.jsx)(ge,{src:u,selectSrc:m,title:O})]}))})}}}]);
//# sourceMappingURL=4.0c0a41e4.chunk.js.map